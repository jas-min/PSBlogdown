---
title: Threat and Race
author: 
- admin
date: '2020-08-28'
slug: threat-and-race
categories:
  - R
tags:
  - R Markdown
  - plot
  - ANOVA
  - time
subtitle: ''
summary: ''
authors: []
lastmod: '2020-08-28T16:00:15-07:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---



<div id="threat-and-race" class="section level1">
<h1>Threat and Race</h1>
<p>There has always been a debate between the links of fatal police shootings and victims. There has even been insinuations that race has an effect on the threatening nature of these individuals. This topic often sparks outrage within the black and POC communities and within law enforcement.</p>
<p>I’m going to try to explore this sensitive topic and try to make some inferential findings.</p>
</div>
<div id="the-data" class="section level1">
<h1>The Data</h1>
<p>The dataset can be found <a href="https://github.com/washingtonpost/data-police-shootings">here</a>.</p>
<p>We have three variables to look at: “attack”, “other”, and “undetermined”. Attack constitutes as the individual was reported to have posed immediate threat to the officer. “Other” is every other level of threat and “undetermined” is for any circumstance that through the vetting process, threat level could not be determined.
Keep in mind how the level of threat is determined, as explained in the home page.</p>
<p>Let’s look at the visualization of the raw numbers/counts. Figure 1 below shows the level of reported threat by race.</p>
<pre class="r"><code>shootings %&gt;%
  mutate(count = 1) %&gt;%
  ggplot() +
  geom_bar(mapping = aes(x = threat_level, fill = race), position = &quot;dodge&quot;) +
  facet_wrap(~threat_level, scales = &quot;free&quot;) + 
  ggtitle(&quot;Raw Amounts of Threat Level&quot;) +
  xlab(&quot;Threat Level&quot;) +
  ylab(&quot;Count&quot;)</code></pre>
<p><img src="/post/2020-08-28-threat-and-race.en_files/figure-html/unnamed-chunk-1-1.png" width="672" />
Figure 1.
<em>Amount of Fatal Police Shootings by Race since 2015</em></p>
<p>All three graphs look identical. The only visual difference is the volume of the counts. I think in this case, looking at the proportions will be more inferenital.</p>
<p>#When Victims are Threatening
I wanted to explore some general statistics of when a victim pose an immediate threat to a police officer’s life. Figure 2 depics a boxplot with the proportions of those who pose immediate threat to an officers life by race.</p>
<pre class="r"><code>r.proportion &lt;- shootings %&gt;%
  mutate(count = 1) %&gt;%
  mutate(year = year(date)) %&gt;%
  aggregate(count ~ threat_level + race + year, data = ., sum) %&gt;%
  filter(threat_level == &quot;attack&quot;) %&gt;%
  group_by(year) %&gt;%
  mutate(race.proportion = count / sum(count))
r.proportion %&gt;%
  ggplot() +
  geom_boxplot(mapping = aes(x = race, y = race.proportion), fill = &quot;lavender&quot;) +
  geom_point(mapping = aes(x = race, y = race.proportion, color = year)) +
  ggtitle(&quot;Proportion of Race with &#39;attack&#39; Threat Level&quot;) + xlab(&quot;Race&quot;) +
  ylab(&quot;Proportion&quot;) + theme_bw()</code></pre>
<p><img src="/post/2020-08-28-threat-and-race.en_files/figure-html/unnamed-chunk-2-1.png" width="672" />
Figure 2.
<em>Box plot and distribution of the proportions of victims who are recorded to have posed a threat to an officer’s life by race from 2015 to current.</em></p>
<p>From 2015 to current, it seems that a largest proportion of those who are recorded to be threatening have tended to be White, Black, Hispanic, Not Recorded, Asian, Native and Other, respectively.</p>
<pre class="r"><code>r.proportion %&gt;%
  lm(formula = race.proportion ~ race, data = .) -&gt; model


summary(model)
## 
## Call:
## lm(formula = race.proportion ~ race, data = .)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.094020 -0.004781 -0.000993  0.011865  0.185885 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   0.013992   0.019169   0.730 0.470298    
## raceBlack     0.227372   0.027109   8.387 6.83e-10 ***
## raceHispanic  0.132954   0.027109   4.904 2.14e-05 ***
## raceNative   -0.001808   0.027109  -0.067 0.947208    
## raceNR        0.106430   0.027109   3.926 0.000387 ***
## raceOther    -0.005531   0.027109  -0.204 0.839508    
## raceWhite     0.442641   0.027109  16.328  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.04695 on 35 degrees of freedom
## Multiple R-squared:  0.9258, Adjusted R-squared:  0.9131 
## F-statistic: 72.76 on 6 and 35 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Display 1. *Simple linear regression model where <code>race</code> predicts the proportion of <code>threat_level</code>.</p>
<pre class="r"><code>ANOVA.threat = aov(model)

# Tukey test to study each pair of treatment :
TUKEY &lt;- TukeyHSD(x=ANOVA.threat, &#39;race&#39;, conf.level=0.95, ordered = TRUE)
# Tuckey test representation :
plot(TUKEY , las=1 , col=&quot;brown&quot;)</code></pre>
<p><img src="/post/2020-08-28-threat-and-race.en_files/figure-html/unnamed-chunk-4-1.png" width="672" />
Figure 3. <em>Confidence intervals of the differencein mean levels of race. Via Tukey’s comparison of means.</em></p>
<pre class="r"><code>TUKEY
##   Tukey multiple comparisons of means
##     95% family-wise confidence level
##     factor levels have been ordered
## 
## Fit: aov(formula = model)
## 
## $race
##                        diff          lwr        upr     p adj
## Native-Other    0.003723252 -0.081017747 0.08846425 0.9999993
## Asian-Other     0.005531169 -0.079209831 0.09027217 0.9999930
## NR-Other        0.111960716  0.027219716 0.19670172 0.0036763
## Hispanic-Other  0.138485474  0.053744474 0.22322647 0.0002168
## Black-Other     0.232902840  0.148161841 0.31764384 0.0000000
## White-Other     0.448172295  0.363431295 0.53291329 0.0000000
## Asian-Native    0.001807917 -0.082933083 0.08654892 1.0000000
## NR-Native       0.108237464  0.023496464 0.19297846 0.0053777
## Hispanic-Native 0.134762222  0.050021222 0.21950322 0.0003255
## Black-Native    0.229179588  0.144438588 0.31392059 0.0000000
## White-Native    0.444449043  0.359708043 0.52919004 0.0000000
## NR-Asian        0.106429547  0.021688547 0.19117055 0.0064548
## Hispanic-Asian  0.132954305  0.048213305 0.21769530 0.0003962
## Black-Asian     0.227371671  0.142630672 0.31211267 0.0000000
## White-Asian     0.442641126  0.357900126 0.52738213 0.0000000
## Hispanic-NR     0.026524758 -0.058216242 0.11126576 0.9554078
## Black-NR        0.120942124  0.036201125 0.20568312 0.0014385
## White-NR        0.336211579  0.251470579 0.42095258 0.0000000
## Black-Hispanic  0.094417366  0.009676367 0.17915837 0.0208135
## White-Hispanic  0.309686821  0.224945821 0.39442782 0.0000000
## White-Black     0.215269454  0.130528455 0.30001045 0.0000000</code></pre>
<p>Display 2. <em>Table from the visualization Figure 3. provides.</em></p>
<pre class="r"><code># I need to group the treatments that are not different each other together.
label_df &lt;- function(TUKEY, variable){
 
     # Extract labels and factor levels from Tukey post-hoc 
     levels &lt;- TUKEY[[variable]][,4]
     Tukey.labels &lt;- data.frame(multcompLetters(levels)[&#39;Letters&#39;])
     
     #I need to put the labels in the same order as in the boxplot :
     Tukey.labels$treatment=rownames(Tukey.labels)
     Tukey.labels=Tukey.labels[order(Tukey.labels$treatment) , ]
     return(Tukey.labels)
     }
 
# Apply the function on my dataset
LABELS &lt;- label_df(TUKEY , &quot;race&quot;)
 
 
# A panel of colors to draw each group with the same color :
my_colors &lt;- c( 
  rgb(143,199,74,maxColorValue = 255),
  rgb(242,104,34,maxColorValue = 255), 
  rgb(111,145,202,maxColorValue = 255),
  rgb(151,105,102,maxColorValue = 255)
  )
 
# Draw the basic boxplot
a &lt;- boxplot(r.proportion$race.proportion ~ r.proportion$race, ylim=c(min(r.proportion$race.proportion) , 1.1*max(r.proportion$race.proportion)) , col=my_colors[as.numeric(LABELS[,1])] , ylab=&quot;value&quot; , main=&quot;&quot;)
## Warning in boxplot.default(split(mf[[response]], mf[-response], drop = drop, :
## NAs introduced by coercion


# I want to write the letter over each box. Over is how high I want to write it.
over &lt;- 0.1*max( a$stats[nrow(a$stats),] )
 
#Add the labels
text( c(1:nlevels(r.proportion$race)) , a$stats[nrow(a$stats),]+over , LABELS[,1]  , col  = my_colors[as.numeric(LABELS[,1])] )
## Warning in text.default(c(1:nlevels(r.proportion$race)),
## a$stats[nrow(a$stats), : NAs introduced by coercion</code></pre>
<p><img src="/post/2020-08-28-threat-and-race.en_files/figure-html/unnamed-chunk-6-1.png" width="672" />
Figure 4. <em>Connecting letters boxplot. Different letters result in significant differences between means</em></p>
<p>Above is</p>
</div>
